{
  "version": "1.0.0",
  "description": "Coordinator が使えるツール定義。追加・削除はこのファイルだけで完結する",
  "tools": [
    {
      "name": "calendar",
      "description": "Googleカレンダーの予定を確認する。今日・明日・来週などの予定一覧を取得できる",
      "confirmation_level": "L1",
      "handler_type": "subprocess",
      "handler_path": "calendar_manager.py",
      "input_schema": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "enum": [
              "list"
            ],
            "description": "list: 予定一覧を取得"
          },
          "days": {
            "type": "integer",
            "description": "何日先まで取得するか（デフォルト: 7）"
          }
        },
        "required": [
          "action"
        ]
      }
    },
    {
      "name": "mail",
      "description": "メールの状況を確認する。返信待ちの件数と概要を取得できる",
      "confirmation_level": "L1",
      "handler_type": "subprocess",
      "handler_path": "mail_manager.py",
      "input_schema": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "enum": [
              "check"
            ],
            "description": "check: 返信待ちメールを確認"
          },
          "account": {
            "type": "string",
            "enum": [
              "personal",
              "kohara"
            ],
            "description": "メールアカウント（デフォルト: personal）"
          }
        },
        "required": [
          "action"
        ]
      }
    },
    {
      "name": "kpi",
      "description": "スキルプラス事業の広告数値・KPIデータを取得して分析する。ROAS、CPA、売上などの指標が含まれる",
      "confirmation_level": "L1",
      "handler_type": "function",
      "handler_function": "kpi",
      "input_schema": {
        "type": "object",
        "properties": {
          "question": {
            "type": "string",
            "description": "KPIに関する質問（例: 今月のROASは？Meta広告のCPAは？）"
          }
        },
        "required": [
          "question"
        ]
      }
    },
    {
      "name": "people",
      "description": "チームメンバーや関係者のプロファイルを検索する。スキル・役割・連絡先・得意分野がわかる。タスクを誰に頼むべきかの推薦もできる",
      "confirmation_level": "L1",
      "handler_type": "subprocess",
      "handler_path": "who_to_ask.py",
      "input_schema": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "検索クエリ（例: Meta広告に詳しい人、デザインができる人）"
          }
        },
        "required": [
          "query"
        ]
      }
    },
    {
      "name": "addness",
      "description": "Addnessのゴール・タスク一覧を確認する。現在進行中のゴールや期限が近いタスクを取得できる",
      "confirmation_level": "L1",
      "handler_type": "file_read",
      "handler_path": "actionable-tasks.md",
      "input_schema": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "enum": [
              "list"
            ],
            "description": "list: 現在のゴール・タスク一覧を取得"
          }
        },
        "required": [
          "action"
        ]
      }
    },
    {
      "name": "sheets",
      "description": "Googleスプレッドシートのデータを読み取る",
      "confirmation_level": "L1",
      "handler_type": "subprocess",
      "handler_path": "sheets_manager.py",
      "input_schema": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "enum": [
              "read"
            ],
            "description": "read: データを読み取る"
          },
          "sheet_id": {
            "type": "string",
            "description": "スプレッドシートID"
          },
          "range": {
            "type": "string",
            "description": "読み取り範囲（例: シート名!A1:D10）"
          }
        },
        "required": [
          "action",
          "sheet_id"
        ]
      }
    },
    {
      "name": "draft_reply",
      "description": "甲原海人の口調で返信案やメッセージを生成する。IDENTITY.mdのスタイルに従い、相手のプロファイルに応じた口調で書く",
      "confirmation_level": "L2",
      "handler_type": "function",
      "handler_function": "draft_reply",
      "input_schema": {
        "type": "object",
        "properties": {
          "recipient": {
            "type": "string",
            "description": "送り先の人物名"
          },
          "context": {
            "type": "string",
            "description": "メッセージの文脈・内容"
          },
          "channel": {
            "type": "string",
            "enum": [
              "line",
              "chatwork",
              "email"
            ],
            "description": "送信チャネル（デフォルト: line）"
          }
        },
        "required": [
          "recipient",
          "context"
        ]
      }
    },
    {
      "name": "analyze",
      "description": "状況を分析して提案する。複数のデータソース（KPI、メール、カレンダー、Addness）を統合して優先度や次のアクションを判定する",
      "confirmation_level": "L2",
      "handler_type": "function",
      "handler_function": "analyze",
      "input_schema": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "分析してほしい内容"
          }
        },
        "required": [
          "query"
        ]
      }
    },
    {
      "name": "send_message",
      "description": "LINE・Chatwork・メールでメッセージを送信する。必ず送信内容を甲原さんに確認してから実行すること",
      "confirmation_level": "L3",
      "handler_type": "action",
      "input_schema": {
        "type": "object",
        "properties": {
          "recipient": {
            "type": "string",
            "description": "送り先の人物名"
          },
          "channel": {
            "type": "string",
            "enum": [
              "line",
              "chatwork",
              "email"
            ],
            "description": "送信チャネル"
          },
          "content": {
            "type": "string",
            "description": "送信内容"
          }
        },
        "required": [
          "recipient",
          "channel",
          "content"
        ]
      }
    },
    {
      "name": "ask_human",
      "description": "チームメンバーに質問・確認・依頼をする。甲原さんの承認後にメッセージを送信する",
      "confirmation_level": "L3",
      "handler_type": "action",
      "input_schema": {
        "type": "object",
        "properties": {
          "recipient": {
            "type": "string",
            "description": "質問・依頼先の人物名"
          },
          "message": {
            "type": "string",
            "description": "質問・依頼の内容"
          },
          "urgency": {
            "type": "string",
            "enum": [
              "high",
              "normal",
              "low"
            ],
            "description": "緊急度"
          }
        },
        "required": [
          "recipient",
          "message"
        ]
      }
    },
    {
      "name": "search",
      "description": "Web検索で最新情報を調べる。企業調査・市場動向・競合分析・ニュースなど、リアルタイムの情報取得に使う",
      "confirmation_level": "L1",
      "handler_type": "claude_search",
      "input_schema": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "検索クエリ（自然言語）"
          }
        },
        "required": [
          "query"
        ]
      }
    },
    {
      "name": "video_reader",
      "description": "Loom/YouTube動画のURLからTranscript（文字起こし）とキーフレーム画像を自動抽出する。動画の内容理解・要約・学習に使う",
      "confirmation_level": "L1",
      "handler_type": "subprocess",
      "handler_path": "video_reader/video_reader.py",
      "input_schema": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "Loom or YouTube URL（例: https://www.loom.com/share/xxxxx, https://www.youtube.com/watch?v=xxxxx）"
          }
        },
        "required": [
          "url"
        ]
      }
    },
    {
      "name": "analyze_content",
      "description": "画像・スクリーンショット・ドキュメントの内容をAI分析する。学習リクエスト（「覚えて」「学んで」等）+ 画像URL時にまず呼び、分析結果を元にsave_video_learningで保存する",
      "confirmation_level": "L1",
      "handler_type": "subprocess",
      "handler_path": "content_analyzer.py",
      "input_schema": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "画像URL or ドキュメントURL"
          },
          "instruction": {
            "type": "string",
            "description": "ユーザーからの補足指示（例: 「Lステップの設定画面」）"
          }
        },
        "required": ["url"]
      }
    },
    {
      "name": "save_video_learning",
      "description": "動画・画像・ドキュメントから学んだ内容を保存する。video_readerやanalyze_contentの結果を受け取ったら同じツールループ内で即座にstatus='pending'で呼ぶこと。ユーザーの承認後にconfirm_video_learningで確定する",
      "confirmation_level": "L1",
      "handler_type": "subprocess",
      "handler_path": "video_reader/video_knowledge.py",
      "input_schema": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "動画URL or 画像URL"
          },
          "title": {
            "type": "string",
            "description": "タイトル"
          },
          "summary": {
            "type": "string",
            "description": "内容要約"
          },
          "key_processes": {
            "type": "array",
            "items": { "type": "string" },
            "description": "学んだ手順・プロセスのリスト"
          },
          "key_points": {
            "type": "array",
            "items": { "type": "string" },
            "description": "覚えておくべきポイントのリスト"
          },
          "use_context": {
            "type": "string",
            "description": "この知識が役立つ場面の説明"
          },
          "source_type": {
            "type": "string",
            "enum": ["video", "image", "screenshot", "document"],
            "description": "ソース種別（デフォルト: video）"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "confirmed"],
            "description": "保存ステータス。必ず'pending'で保存し、ユーザー承認後にconfirm_video_learningで確定する"
          }
        },
        "required": ["url", "title", "summary"]
      }
    },
    {
      "name": "update_video_learning",
      "description": "保存済みのpending状態の知識を修正する。ユーザーから修正指示があったときに使う。修正後は再度確認を取り、承認されたらconfirm_video_learningで確定する",
      "confirmation_level": "L1",
      "handler_type": "subprocess",
      "handler_path": "video_reader/video_knowledge.py",
      "input_schema": {
        "type": "object",
        "properties": {
          "summary": {
            "type": "string",
            "description": "修正後の要約"
          },
          "key_processes": {
            "type": "array",
            "items": { "type": "string" },
            "description": "修正後の手順リスト"
          },
          "key_points": {
            "type": "array",
            "items": { "type": "string" },
            "description": "修正後のポイントリスト"
          },
          "use_context": {
            "type": "string",
            "description": "修正後の活用場面"
          },
          "title": {
            "type": "string",
            "description": "修正後のタイトル"
          }
        }
      }
    },
    {
      "name": "confirm_video_learning",
      "description": "pendingの動画知識を承認・確定する。ユーザーが「OK」「覚えて」「それでいい」等と承認したときに呼ぶ。承認なしに呼んではいけない",
      "confirmation_level": "L1",
      "handler_type": "subprocess",
      "handler_path": "video_reader/video_knowledge.py",
      "input_schema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "generate_image",
      "description": "画像・バナー・広告ビジュアルを生成する。プロンプトに基づいて画像を作成する",
      "confirmation_level": "L2",
      "handler_type": "api_call",
      "preferred_agent": "Lubert",
      "input_schema": {
        "type": "object",
        "properties": {
          "prompt": {
            "type": "string",
            "description": "画像生成のプロンプト（生成したい画像の詳細な説明）"
          },
          "style": {
            "type": "string",
            "description": "画像スタイル（例: photorealistic, illustration, minimal）"
          },
          "size": {
            "type": "string",
            "description": "画像サイズ（例: 1080x1080, 1200x628）"
          }
        },
        "required": [
          "prompt"
        ]
      }
    },
    {
      "name": "generate_video",
      "description": "動画素材・広告動画を生成する。プロンプトに基づいて動画を作成する",
      "confirmation_level": "L2",
      "handler_type": "api_call",
      "preferred_agent": null,
      "input_schema": {
        "type": "object",
        "properties": {
          "prompt": {
            "type": "string",
            "description": "動画生成のプロンプト（生成したい動画の詳細な説明）"
          },
          "duration": {
            "type": "integer",
            "description": "動画の長さ（秒）"
          },
          "style": {
            "type": "string",
            "description": "動画スタイル"
          }
        },
        "required": [
          "prompt"
        ]
      }
    }
  ]
}
