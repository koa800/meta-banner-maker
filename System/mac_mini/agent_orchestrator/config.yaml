# Agent Orchestrator Configuration

agent:
  name: "mac-mini-agent"
  log_level: "INFO"

paths:
  repo_root: "~/agents"
  system_dir: "~/agents/System"
  master_dir: "~/agents/Master"
  skills_dir: "~/agents/Skills"
  db_path: "~/agents/System/mac_mini/agent_orchestrator/agent.db"
  log_dir: "~/agents/System/mac_mini/agent_orchestrator/logs"

# スケジュール設計方針:
#   - 同じ時刻に複数タスクを並べない（1つずつ順番に実行する）
#   - 重いタスク（API呼び出しあり）は最低5分空ける
#   - 軽いタスク（ローカル処理のみ）は間隔短くてOK
schedule:
  # === 朝の流れ ===
  sheets_sync:
    cron: "30 6 * * *"           # 06:30  データ準備（他より先に実行）
    enabled: true
  addness_fetch:
    cron: "0 8 */3 * *"          # 08:00  Addnessゴールツリー取得（3日ごと）
    enabled: true
  ai_news:
    cron: "10 8 * * *"           # 08:10  AIニュース収集
    enabled: true
  oauth_health_check:
    cron: "25 8 * * *"           # 08:25  認証チェック（Google + Claude Code OAuth）※日報入力(08:40)の前に実行
    enabled: true
  daily_addness_digest:
    cron: "30 8 * * *"           # 08:30  朝のブリーフィング
    enabled: true
  addness_goal_check:
    cron: "0 9 * * *"            # 09:00  ゴール→やることリスト整理
    enabled: true

  # === 朝の定常業務 ===
  daily_report_input:
    cron: "40 8 * * *"           # 08:40  日報自動入力（秘書がClaude Codeで実行）※OAuthチェック後
    enabled: true
  daily_report_verify:
    cron: "20 9 * * *"           # 09:20  日報入力の完了検証（シートの実データ確認）
    enabled: true

  # === 秘書自律ワーク ===
  secretary_proactive_work:
    cron: "0 10,14,17 * * 1-5"   # 平日 10:00/14:00/17:00  Addnessタスクを自律的に進める
    enabled: true

  # === 日中 ===
  looker_csv_download:
    cron: "30 11 * * *"          # 11:30  Looker Studio CSVダウンロード（前々日分。12:00のkpi_daily_importの前に実行）
    enabled: true
  mail_inbox_personal:
    cron: "0 */3 * * *"          # 3時間ごと :00  個人メール確認
    enabled: true
  mail_inbox_kohara:
    cron: "5 */3 * * *"          # 3時間ごと :05  koharaメール確認（5分ズラし）
    enabled: true
  kpi_daily_import:
    cron: "0 12 * * *"           # 12:00  KPIデータ投入
    enabled: true

  # === 夜の流れ ===
  daily_report:
    cron: "0 21 * * *"           # 21:00  日次レポート
    enabled: true
  daily_group_digest:
    cron: "10 21 * * *"          # 21:10  グループLINEダイジェスト
    enabled: true
  kpi_nightly_cache:
    cron: "0 22 * * *"           # 22:00  KPIキャッシュ再生成
    enabled: true

  # === 週次 ===
  weekly_idea_proposal:
    cron: "0 9 * * 1"            # 月曜 09:00  アイデア提案
    enabled: true
  weekly_stats:
    cron: "30 9 * * 1"           # 月曜 09:30  週次レポート
    enabled: true
  weekly_content_suggestions:
    cron: "0 10 * * 3"           # 水曜 10:00  コンテンツ提案
    enabled: true
  weekly_profile_learning:
    cron: "0 10 * * 0"           # 日曜 10:00  プロファイル学習
    enabled: true
  os_sync_session:
    cron: "0 20 * * 5"           # 金曜 20:00  OSすり合わせ（秘書→甲原）
    enabled: true
  weekly_hinata_memory:
    cron: "30 10 * * 0"          # 日曜 10:30  日向の記憶統合（profile_learningの後）
    enabled: true
  video_knowledge_review:
    cron: "0 11 * * 0"           # 日曜 11:00  動画知識ライフサイクルレビュー（hinata_memoryの後）
    enabled: true
  video_learning_reminder:
    interval_minutes: 30         # 承認待ち動画知識のリマインド（1時間経過でLINE通知）
    enabled: true

  # === 常時監視（軽量・ローカル処理） ===
  health_check:
    interval_minutes: 5          # 死活監視・自動復旧
    enabled: true
  git_pull_sync:
    interval_minutes: 5          # GitHubから同期
    enabled: true
  render_health_check:
    interval_minutes: 30         # Renderサーバー監視
    enabled: true
  repair_check:
    interval_minutes: 30         # エラー検知・修復提案
    enabled: true

  # === 深夜 ===
  log_rotate:
    cron: "0 3 * * *"            # 03:00  ログ圧縮
    enabled: true

  # === Slack連携（秘書が監視・日向に指示を渡す） ===
  slack_dispatch:
    interval_seconds: 15         # Slack #ai-team 監視 → 日向タスクキューへ
    enabled: true
  slack_hinata_auto_reply:
    interval_seconds: 15         # 日向のSlack報告に秘書が返答
    enabled: true

  # === 無効化済み ===
  slack_ai_team_check:
    interval_minutes: 30
    enabled: false               # slack_dispatch に統合
  hinata_activity_check:
    cron: "0 21 * * *"
    enabled: false               # slack_dispatch + slack_hinata_auto_reply で代替

webhook:
  host: "0.0.0.0"
  port: 8500
  enabled: true

notifications:
  line_notify_token_secret: "LINE_NOTIFY_TOKEN"
  slack_webhook_secret: "SLACK_WEBHOOK_URL"

safety:
  api_call_limit_per_hour: 100
  require_approval_for_external: true
  max_task_duration_seconds: 300

llm:
  provider: "anthropic"
  model: "claude-sonnet-4-6"
  max_tokens: 4096
