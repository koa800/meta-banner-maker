# Claude Code ルール（このプロジェクト専用）

## ドキュメント更新ルール

**コードや設定を変更・追加したら、必ず関連ドキュメントも同じセッション内で最新化すること。**

### 対象ドキュメント

| ファイル | 更新トリガー |
|---------|------------|
| `Project/AI秘書作成.md` | `System/line_bot/app.py` または `System/line_bot_local/local_agent.py` を変更したとき |
| `Project/質問自動回答プロジェクト.md` | Q&A関連（`qa_handler.py`, `qa_monitor.py`, `qa_search.py`）を変更したとき |
| `Project/メール自動管理.md` | メール関連（`mail_manager.py`, `mail_inbox_*.py`）を変更したとき |

### 更新の原則

- **古い情報は残さない**: 変更箇所は上書き・削除して最新状態にする
- **完了済みは [x]**: 実装済み機能はチェックボックスを必ず [x] にする
- **最終更新日を更新**: ファイル冒頭の「最終更新」日付を変更日に更新する
- **ステータスを正確に**: 完了・開発中・廃止を正確に反映する

### 更新する内容の例

- 新機能を追加 → 機能一覧・コマンドリファレンスに追記
- バグ修正 → 注意事項・既知の制限を更新
- ファイルを追加・削除 → ファイル構成表を更新
- 環境変数を追加 → 環境変数一覧を更新
- アーキテクチャ変更 → 図・説明を更新

---

## プロジェクト構成

```
cursor/
├── Project/          # プロジェクトドキュメント（常に最新を維持）
├── Master/           # 知識ベース（people-profiles.json, IDENTITY.md 等）
├── System/           # 実装ファイル
│   ├── line_bot/     # Render (Flask) サーバー（サブモジュール）
│   └── line_bot_local/ # PC常駐エージェント
└── Skills/           # ナレッジ・スキル定義
```

## コミットルール

- `System/line_bot/` への変更は `cd System/line_bot && git add . && git commit` でサブモジュールに個別コミット
- その後 `git push origin main` で Render に自動デプロイ
- メインリポジトリ側も変更があれば別途コミット
